# Production Environment Configuration for JENEZIS
# Copy this file to .env and configure with your production values
# NEVER commit the actual .env file with real credentials

# ============================================================================
# SECURITY - REQUIRED
# ============================================================================

# API Authentication Token (generate with: openssl rand -hex 32)
# Used to protect admin endpoints (/admin/*)
API_AUTH_TOKEN=CHANGE_THIS_TO_A_SECURE_RANDOM_TOKEN

# CORS Configuration - REQUIRED for production
# Specify exact domains that should be allowed to access the API
# Example: https://app.example.com,https://admin.example.com
CORS_ORIGINS=https://your-production-domain.com

# ============================================================================
# OPENAI CONFIGURATION - REQUIRED for AI features
# ============================================================================

# OpenAI API Key (required for skills enrichment and entity resolution)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# LLM Model Selection
# Options: gpt-4o-mini (cheaper), gpt-4o (better quality), gpt-3.5-turbo (legacy)
LLM_MODEL=gpt-4o-mini

# ============================================================================
# NEO4J CONFIGURATION - REQUIRED for graph features
# ============================================================================

# Neo4j Connection Settings
NEO4J_URI=bolt://your-neo4j-host:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your-secure-neo4j-password

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Environment Mode
NODE_ENV=production

# Logging Level
# Options: debug, info, warning, error, critical
LOG_LEVEL=info

# Gunicorn Workers
# Recommended: 2-4 x CPU cores
GUNICORN_WORKERS=4

# ============================================================================
# MONITORING - OPTIONAL
# ============================================================================

# Grafana Admin Credentials (only if using monitoring profile)
GRAFANA_USER=admin
GRAFANA_PASSWORD=change-this-secure-password

# ============================================================================
# DATABASE SETTINGS - Generally don't need to change
# ============================================================================

# SQLite database paths (relative to container)
# These are mounted as volumes in docker-compose.yml
# ONTOLOGY_DB=/app/data/databases/ontology.db
# ENTITY_RESOLVER_DB=/app/data/databases/entity_resolver.db

# ============================================================================
# RATE LIMITING - OPTIONAL
# ============================================================================

# API Rate Limiting (requests per minute)
# RATE_LIMIT_PER_MINUTE=60

# OpenAI Rate Limiting (delay between requests in seconds)
# OPENAI_RATE_LIMIT_DELAY=0.5

# ============================================================================
# BACKUP CONFIGURATION - OPTIONAL
# ============================================================================

# S3 Backup Configuration (for automated backups)
# S3_BACKUP_BUCKET=your-backup-bucket
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_DEFAULT_REGION=eu-west-1

# ============================================================================
# SSL/TLS CONFIGURATION - For production with nginx
# ============================================================================

# SSL Certificate paths (mounted in nginx container)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================
#
# 1. Generate secure tokens:
#    - API_AUTH_TOKEN: openssl rand -hex 32
#    - Database passwords: openssl rand -base64 24
#
# 2. Security checklist:
#    ✓ Change all default passwords
#    ✓ Set specific CORS_ORIGINS
#    ✓ Use HTTPS in production (configure nginx SSL)
#    ✓ Enable API_AUTH_TOKEN
#    ✓ Keep .env file permissions restricted (chmod 600)
#    ✓ Never commit .env to version control
#
# 3. Performance tuning:
#    - Adjust GUNICORN_WORKERS based on CPU cores
#    - Monitor memory usage and adjust Docker limits if needed
#    - Consider PostgreSQL for high-concurrency scenarios
#
# 4. Backup strategy:
#    - Regular SQLite database backups (daily recommended)
#    - Store backups off-site (S3, Azure Blob, etc.)
#    - Test restore procedures regularly
#
# ============================================================================