# ============================================================================
# DOMAIN CONFIGURATION: IT Skills Taxonomy
# ============================================================================
# Purpose: Harmonize and classify technical and soft skills in IT domain
# Use Case: Talent management, resume parsing, skill gap analysis
# ============================================================================

metadata:
  name: "IT Skills & Competencies Ontology"
  domain_id: "it_skills"
  version: "1.2.0"
  description: "Comprehensive taxonomy of technical skills, tools, frameworks, and soft skills for IT professionals"
  owner: "Sigilum EURL - Julien DABERT"
  created_at: "2025-01-15T00:00:00Z"
  updated_at: "2025-10-25T00:00:00Z"

node_types:
  - name: "skill"
    display_name: "Technical Skill"
    description: "A technical or soft skill in IT/software development"
    schema:
      - property_name: "proficiency_level"
        property_type: "string"
        required: false
        default: null
      - property_name: "years_of_experience"
        property_type: "integer"
        required: false
        default: null

  - name: "tool"
    display_name: "Software Tool"
    description: "A software application or platform (e.g., Jira, VS Code)"
    schema:
      - property_name: "vendor"
        property_type: "string"
        required: false
      - property_name: "license_type"
        property_type: "string"
        required: false

  - name: "framework"
    display_name: "Development Framework"
    description: "A software framework or library (e.g., React, Django)"
    schema:
      - property_name: "language"
        property_type: "string"
        required: true
      - property_name: "latest_version"
        property_type: "string"
        required: false

relationship_types:
  - name: "is_subtype_of"
    display_name: "Is Subtype Of"
    description: "Hierarchical parent-child relationship (e.g., React is_subtype_of JavaScript)"
    source_types: ["skill", "tool", "framework"]
    target_types: ["skill", "tool", "framework"]
    properties: []
    cardinality: "many_to_one"

  - name: "requires"
    display_name: "Requires"
    description: "Prerequisite relationship (e.g., Django requires Python)"
    source_types: ["framework", "tool"]
    target_types: ["skill"]
    properties:
      - property_name: "minimum_version"
        property_type: "string"
        required: false
    cardinality: "many_to_many"

  - name: "similar_to"
    display_name: "Similar To"
    description: "Peer relationship for equivalent skills (e.g., MySQL similar_to PostgreSQL)"
    source_types: ["skill", "tool"]
    target_types: ["skill", "tool"]
    properties:
      - property_name: "similarity_score"
        property_type: "float"
        required: false
    cardinality: "many_to_many"

data_sources:
  - name: "production_candidate_skills"
    type: "csv"
    enabled: true
    path: "data/candidats_competences.csv"
    encoding: "utf-8"
    delimiter: ","
    mappings:
      - source_column: "competence_brute"
        target_node_type: "skill"
        action: "analyze_and_map"
        transform: "value.lower().strip()"

  - name: "github_trending_repos"
    type: "api"
    enabled: false
    url: "https://api.github.com/trending"
    method: "GET"
    headers:
      Accept: "application/json"
    auth_type: "none"
    mappings:
      - source_column: "language"
        target_node_type: "skill"
        action: "map_only"

llm:
  enabled: true
  provider: "openai"
  model: "gpt-4o-mini-2024-07-18"
  api_key_env: "OPENAI_API_KEY"
  temperature: 0.1
  max_tokens: 500

  prompts:
    densification: |
      You are an expert in IT skills taxonomy and software development.
      Your task is to categorize the raw skill provided below.

      Raw skill to analyze: "{{ node_name }}"
      Domain: {{ metadata.name }}

      Available node types:
      {% for node_type in node_types %}
      - {{ node_type.name }}: {{ node_type.description }}
      {% endfor %}

      Available relationship types:
      {% for rel_type in relationship_types %}
      - {{ rel_type.name }}: {{ rel_type.description }} (source: {{ rel_type.source_types | join(', ') }} → target: {{ rel_type.target_types | join(', ') }})
      {% endfor %}

      Existing canonical nodes for reference (top 50):
      {{ existing_nodes_sample | join(', ') }}

      Respond ONLY with valid JSON (no explanations):
      {
        "canonical_name": "normalized_name_in_snake_case",
        "node_type": "skill | tool | framework",
        "aliases": ["original_name", "variation1", "variation2"],
        "relationships": [
          {
            "type": "is_subtype_of",
            "target": "parent_canonical_name"
          }
        ],
        "properties": {}
      }

      Rules:
      1. canonical_name must be snake_case lowercase
      2. Always include the original raw skill in aliases
      3. Choose appropriate node_type (skill for general concepts, tool for software applications, framework for dev frameworks)
      4. Create hierarchical relationships using is_subtype_of when applicable
      5. For frameworks, use "requires" to link to prerequisite skills

      Examples:
      - "git" → {"canonical_name": "git", "node_type": "tool", "aliases": ["git", "github", "gitlab"], "relationships": [{"type": "is_subtype_of", "target": "version_control"}]}
      - "React.js" → {"canonical_name": "react", "node_type": "framework", "aliases": ["react", "reactjs", "react.js"], "relationships": [{"type": "is_subtype_of", "target": "javascript"}, {"type": "requires", "target": "javascript"}]}

    suggestion: |
      Given the unknown skill "{{ node_name }}" in {{ metadata.name }},
      suggest the top {{ top_k }} most similar canonical nodes.

      Available canonical nodes (sample):
      {{ canonical_nodes_sample | join(', ') }}

      Return ONLY a JSON array of canonical node names, ordered by relevance:
      ["canonical_name_1", "canonical_name_2", "canonical_name_3"]

validation:
  auto_approve_threshold: 1000
  min_alias_length: 2
  max_alias_length: 100
  allow_duplicates: false
  require_relationships: true

export:
  formats:
    - type: "cypher"
      enabled: true
      options:
        merge_strategy: "on_create_set_on_match_set"
    - type: "json"
      enabled: true
      options:
        indent: 2
    - type: "csv"
      enabled: true

  neo4j:
    enabled: true
    node_label_mapping:
      skill: "Skill"
      tool: "Tool"
      framework: "Framework"
    relationship_label_mapping:
      is_subtype_of: "IS_SUBTYPE_OF"
      requires: "REQUIRES"
      similar_to: "SIMILAR_TO"

cache:
  enabled: true
  ttl_seconds: 3600
  max_size: 100000

webhooks:
  on_node_created: []
  on_relationship_created: []
  on_enrichment_completed: []

extensions:
  custom_processors: []
  ui_customization:
    primary_color: "#3B82F6"
    logo_url: "https://example.com/logo.png"
    custom_css: ""

migration:
  legacy_mappings: []
  deprecated_types: []
